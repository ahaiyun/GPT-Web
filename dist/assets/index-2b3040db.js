import{q as u,G as y,r as l,j as a,O as f,H as n,n as v,E as g,b as N,J as i,K as D,I,L as S,m as C,x as E,y as z}from"./index-69a0c86a.js";import{L as G}from"./index-88c3a1ab.js";import{C as L}from"./ClearOutlined-016c8197.js";const M="_drawPage_container_p1jc_1",R="_drawPage_container_one_p1jc_9",T="_drawPage_container_two_p1jc_19",b="_drawPage_config_p1jc_22",B="_drawPage_mydraw_p1jc_34",A="_drawPage_mydraw_header_p1jc_37",O="_drawPage_mydraw_header_icon_p1jc_50",k="_drawPage_mydraw_list_p1jc_62",H="_drawPage_mydraw_list_item_p1jc_67",U="_drawPage_header_p1jc_75",V="_drawPage_create_p1jc_94",q="_drawPage_image_p1jc_106",J="_drawPage_p1jc_1",r={drawPage_container:M,drawPage_container_one:R,drawPage_container_two:T,drawPage_config:b,drawPage_mydraw:B,drawPage_mydraw_header:A,drawPage_mydraw_header_icon:O,drawPage_mydraw_list:k,drawPage_mydraw_list_item:H,drawPage_header:U,drawPage_create:V,drawPage_image:q,drawPage:J};function Q(){const{token:w,setLoginModal:m}=u(),{historyDrawImages:c,clearhistoryDrawImages:h,addDrawImage:P}=y(),[s,o]=l.useState({prompt:"",n:1,size:"256x256",response_format:"url"}),[t,_]=l.useState({loading:!1,list:[]}),j=e=>{if(e.code||e.data.length<=0){C.error("请求错误 🙅");return}_({loading:!1,list:e.data});const d=e.data.map(p=>({...p,...s,id:E(),dateTime:z()}));P(d)},x=async()=>{if(!w){m(!0);return}_({loading:!0,list:[]}),await S(s,{},{timeout:0}).then(j).finally(()=>{_(e=>({...e,loading:!1}))})};return a.jsx("div",{className:r.drawPage,children:a.jsx(G,{children:a.jsxs("div",{className:r.drawPage_container,children:[a.jsxs("div",{className:r.drawPage_container_one,children:[a.jsxs("div",{className:r.drawPage_header,children:[a.jsx("img",{src:"https://www.imageoss.com/images/2023/05/05/Midjourneybf2f31b4a2ac2dc9.png",alt:"Midjourney"}),a.jsx("h2",{children:"AI 一下，妙笔生画"}),a.jsx("h4",{children:"只需一句话，让你的文字变成画作"})]}),a.jsxs("div",{className:r.drawPage_create,style:{minHeight:t.loading||t.list.length>0?"":0},children:[t.loading&&a.jsx(f,{rotate:!0,width:"3em",height:"3em"}),a.jsx(n.PreviewGroup,{children:t.list.map(e=>a.jsx(n,{className:r.drawPage_image,width:160,src:e.url},e.url))})]}),a.jsxs("div",{className:r.drawPage_mydraw,children:[a.jsxs("div",{className:r.drawPage_mydraw_header,children:[a.jsxs("div",{children:[a.jsx("h4",{children:"我的绘画"}),a.jsx("p",{children:"请及时保存绘画图片，链接可能会失效"})]}),a.jsx(v,{title:"清除历史绘画",description:"确定清除所有绘画数据吗？",onConfirm:()=>{h()},okText:"Yes",cancelText:"No",children:a.jsx(L,{className:r.drawPage_mydraw_header_icon})})]}),c.length<=0&&a.jsx(g,{image:g.PRESENTED_IMAGE_SIMPLE,description:"暂无生成记录"}),a.jsx(n.PreviewGroup,{children:a.jsx("div",{className:r.drawPage_mydraw_list,children:c.map(e=>a.jsxs("div",{className:r.drawPage_mydraw_list_item,children:[a.jsx(n,{className:r.drawPage_image,src:e.url}),a.jsx("p",{children:e.prompt})]},e.id))})})]})]}),a.jsxs("div",{className:r.drawPage_container_two,children:[a.jsxs("div",{className:r.drawPage_config,children:[a.jsxs(N,{direction:"vertical",children:[a.jsxs("p",{children:["图片尺寸(",s.size,")"]}),a.jsxs(i.Group,{buttonStyle:"solid",defaultValue:s.size,value:s.size,onChange:e=>{o(d=>({...d,size:e.target.value}))},children:[a.jsx(i.Button,{value:"256x256",children:"256x256"}),a.jsx(i.Button,{value:"512x512",children:"512x512"}),a.jsx(i.Button,{value:"1024x1024",children:"1024x1024"})]}),a.jsxs("p",{children:["图片数量(",s.n,"张)"]})]}),a.jsx(D,{defaultValue:s.n,value:s.n,min:1,max:10,onChange:e=>{o(d=>({...d,n:e}))}})]}),a.jsx(I.Search,{value:s.prompt,placeholder:"请输入修饰词",allowClear:!0,enterButton:t.loading?"绘制中...":"开始绘制",size:"large",loading:t.loading,onSearch:()=>{x()},onChange:e=>{o(d=>({...d,prompt:e.target.value}))}})]})]})})})}export{Q as default};
