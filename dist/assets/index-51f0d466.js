import{r as c,N as C,Q as b,T as D,ad as M,ae as R,C as k,c as z,af as H,j as d,ag as w,b as F}from"./index-69a0c86a.js";const O=e=>{const{value:t,formatter:o,precision:a,decimalSeparator:n,groupSeparator:l="",prefixCls:s}=e;let i;if(typeof o=="function")i=o(t);else{const r=String(t),u=r.match(/^(-?)(\d*)(\.(\d+))?$/);if(!u||r==="-")i=r;else{const f=u[1];let m=u[2]||"0",p=u[4]||"";m=m.replace(/\B(?=(\d{3})+(?!\d))/g,l),typeof a=="number"&&(p=p.padEnd(a,"0").slice(0,a>0?a:0)),p&&(p=`${n}${p}`),i=[c.createElement("span",{key:"int",className:`${s}-content-value-int`},f,m),p&&c.createElement("span",{key:"decimal",className:`${s}-content-value-decimal`},p)]}}return c.createElement("span",{className:`${s}-content-value`},i)},U=O,L=e=>{const{componentCls:t,marginXXS:o,padding:a,colorTextDescription:n,titleFontSize:l,colorTextHeading:s,contentFontSize:i,fontFamily:r}=e;return{[`${t}`]:Object.assign(Object.assign({},D(e)),{[`${t}-title`]:{marginBottom:o,color:n,fontSize:l},[`${t}-skeleton`]:{paddingTop:a},[`${t}-content`]:{color:s,fontSize:i,fontFamily:r,[`${t}-content-value`]:{display:"inline-block",direction:"ltr"},[`${t}-content-prefix, ${t}-content-suffix`]:{display:"inline-block"},[`${t}-content-prefix`]:{marginInlineEnd:o},[`${t}-content-suffix`]:{marginInlineStart:o}}})}},B=C("Statistic",e=>{const t=b(e,{});return[L(t)]},e=>{const{fontSizeHeading3:t,fontSize:o}=e;return{titleFontSize:o,contentFontSize:t}}),P=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]];function X(e,t){let o=e;const a=/\[[^\]]*]/g,n=(t.match(a)||[]).map(r=>r.slice(1,-1)),l=t.replace(a,"[]"),s=P.reduce((r,u)=>{let[f,m]=u;if(r.includes(f)){const p=Math.floor(o/m);return o-=p*m,r.replace(new RegExp(`${f}+`,"g"),g=>{const x=g.length;return p.toString().padStart(x,"0")})}return r},l);let i=0;return s.replace(a,()=>{const r=n[i];return i+=1,r})}function A(e,t){const{format:o=""}=t,a=new Date(e).getTime(),n=Date.now(),l=Math.max(a-n,0);return X(l,o)}const Q=1e3/30;function V(e){return new Date(e).getTime()}const Y=e=>{const{value:t,format:o="HH:mm:ss",onChange:a,onFinish:n}=e,l=M(),s=c.useRef(null),i=()=>{n==null||n(),s.current&&(clearInterval(s.current),s.current=null)},r=()=>{const m=V(t);m>=Date.now()&&(s.current=setInterval(()=>{l(),a==null||a(m-Date.now()),m<Date.now()&&i()},Q))};c.useEffect(()=>(r(),()=>{s.current&&(clearInterval(s.current),s.current=null)}),[t]);const u=(m,p)=>A(m,Object.assign(Object.assign({},p),{format:o})),f=m=>R(m,{title:void 0});return c.createElement(I,Object.assign({},e,{valueRender:f,formatter:u}))},q=c.memo(Y),h=e=>{const{prefixCls:t,className:o,rootClassName:a,style:n,valueStyle:l,value:s=0,title:i,valueRender:r,prefix:u,suffix:f,loading:m=!1,onMouseEnter:p,onMouseLeave:g,decimalSeparator:x=".",groupSeparator:E=","}=e,{getPrefixCls:N,direction:$}=c.useContext(k),_=N("statistic",t),[j,T]=B(_),S=c.createElement(U,Object.assign({decimalSeparator:x,groupSeparator:E,prefixCls:_},e,{value:s})),y=z(_,{[`${_}-rtl`]:$==="rtl"},o,a,T);return j(c.createElement("div",{className:y,style:n,onMouseEnter:p,onMouseLeave:g},i&&c.createElement("div",{className:`${_}-title`},i),c.createElement(H,{paragraph:!1,loading:m,className:`${_}-skeleton`},c.createElement("div",{style:l,className:`${_}-content`},u&&c.createElement("span",{className:`${_}-content-prefix`},u),r?r(S):S,f&&c.createElement("span",{className:`${_}-content-suffix`},f)))))};h.Countdown=q;const I=h,G="_userInfo_1rwp4_1",J="_userInfo_card_1rwp4_6",K="_userInfo_avatar_1rwp4_11",W="_userInfo_info_1rwp4_16",Z="_userInfo_info_title_1rwp4_19",ee="_userInfo_info_account_1rwp4_31",te="_userInfo_vip_1rwp4_35",v={userInfo:G,userInfo_card:J,userInfo_avatar:K,userInfo_info:W,userInfo_info_title:Z,userInfo_info_account:ee,userInfo_vip:te};function se(e){const t={vip:"https://s.ibaotu.com/next/img/new/ep.4814.png",svip:"https://s.ibaotu.com/next/img/new/person.b254.png"},o=c.useMemo(()=>{var u,f;if(!((u=e.info)!=null&&u.vip_expire_time))return 0;const l=new Date;l.setHours(0,0,0,0);const s=l.getTime(),i=new Date(((f=e.info)==null?void 0:f.vip_expire_time)||0).getTime();return i<s?0:Math.ceil((i-s)/864e5)},[e]),a=c.useMemo(()=>{var u,f;if(!((u=e.info)!=null&&u.svip_expire_time))return 0;const l=new Date;l.setHours(0,0,0,0);const s=l.getTime(),i=new Date(((f=e.info)==null?void 0:f.svip_expire_time)||0).getTime();return i<s?0:Math.ceil((i-s)/864e5)},[e]),n=c.useMemo(()=>e.info,[e]);return d.jsxs("div",{className:v.userInfo,children:[d.jsxs("div",{className:v.userInfo_card,children:[d.jsx("img",{className:v.userInfo_avatar,src:n==null?void 0:n.avatar,alt:""}),d.jsxs("div",{className:v.userInfo_info,children:[d.jsxs("div",{className:v.userInfo_info_title,children:[d.jsx("span",{children:n==null?void 0:n.nickname}),a?d.jsx(w,{title:"超级会员",children:d.jsx("img",{src:t.svip,alt:""})}):o?d.jsx(w,{title:"会员",children:d.jsx("img",{src:t.vip,alt:""})}):""]}),d.jsx("span",{className:v.userInfo_info_account,children:n==null?void 0:n.account})]}),d.jsx("div",{className:v.userInfo_vip,children:d.jsxs(F,{wrap:!0,size:"large",children:[d.jsx(I,{title:"积分",value:n==null?void 0:n.integral}),d.jsx(I,{title:"会员(天)",value:o})]})})]}),e.children]})}export{se as U};
